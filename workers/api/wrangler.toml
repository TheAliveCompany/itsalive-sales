name = "itsalive-api"
main = "src/index.js"
compatibility_date = "2024-01-01"

routes = [
  { pattern = "api.itsalive.co/*", zone_name = "itsalive.co" }
]

[[r2_buckets]]
binding = "SITES"
bucket_name = "itsalive-sites"

[[d1_databases]]
binding = "DB"
database_name = "itsalive-db"
database_id = "08e902ec-f754-47a1-8f1d-63c916aefef4"

[[kv_namespaces]]
binding = "RATE_LIMITS"
id = "392e1a15e04f489281d2290d402f841e"

[[kv_namespaces]]
binding = "EMAIL_TOKENS"
id = "07925433be8740968fd9245aace368ea"

# Cron trigger for processing scheduled jobs and cron tasks
# NOTE: Requires workers.dev subdomain - enable in Cloudflare dashboard first
# [triggers]
# crons = ["* * * * *"]  # Every minute

# Required secrets (add with: wrangler secret put SECRET_NAME):
# - CLOUDFLARE_API_TOKEN: API token with Zone:Edit, DNS:Edit, Workers Routes:Edit permissions
# - CLOUDFLARE_ZONE_ID: Zone ID for itsalive.co
# - CLOUDFLARE_ACCOUNT_ID: Account ID for creating new zones
